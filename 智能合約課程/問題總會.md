title: 問題整理

## 什麼是共識機制

共識機制就是區塊鏈上「大家如何達成共識，決定哪個區塊才是真的、該被寫入鏈中」的規則。

為什麼需要「共識」？
區塊鏈是去中心化系統，沒有一個中央伺服器說了算。所以每個節點都可能收到不同的交易紀錄。為了讓大家的帳本保持一致，就需要一套機制來決定：

- 哪個區塊是真的？
- 哪些是錯的、重複的、惡意的？

這套「決策規則」就叫做共識機制（Consensus Mechanism）

🧠 簡單比喻
像是一群人要投票決定：「誰來寫今天的帳？寫了哪些內容？」
共識機制就像是這群人事先約好的遊戲規則，例如：

「誰算數學最快誰寫帳」（PoW）

「誰押最多錢誰寫帳」（PoS）

## 為什麼有 bitcoin 了還會有以太幣？以太訪的出現是為了解決什麼問題嗎？

以太坊（Ethereum）不是用來取代比特幣，而是為了解決比特幣只能「轉帳」的限制，加入了可以執行「程式邏輯」的能力，也就是所謂的「智慧合約」。

---

### 1. **比特幣的限制**

- 比特幣的用途很單一：**只能轉帳**（從 A 傳比特幣給 B）
- 無法做像「如果…就…」這種邏輯條件判斷
- 不適合做複雜應用（例如 NFT、DeFi、DAO）

---

### 2. **以太坊解決了什麼問題？**

以太坊引入了**智慧合約（Smart Contracts）**：

- 智慧合約是一種**寫在區塊鏈上的程式**
- 可以自動執行像：
  - NFT 發行與轉移
  - 去中心化交易所（DEX）
  - 借貸平台（Compound、Aave）
  - DAO 投票機制

- 這些在比特幣上都**無法實現**

---

### 3. **ETH（以太幣）的角色**

- ETH 是以太坊上的**原生貨幣**
- 用來支付：
  - 智慧合約執行費用（Gas）
  - 交易手續費

- 有點像「在以太坊這台全球電腦上跑程式，要付電費」

---

### 4. **總結比特幣 vs 以太坊**

| 項目   | 比特幣（Bitcoin）  | 以太坊（Ethereum） |
| ------ | ------------------ | ------------------ |
| 目標   | 去中心化的數位貨幣 | 去中心化的應用平台 |
| 功能   | 轉帳               | 執行智慧合約、DApp |
| 貨幣   | BTC                | ETH                |
| 靈活性 | 固定用途           | 可程式化，彈性高   |

---

## layer1 跟 layer2 是什麼？ 這兩個有差別？

Layer 1 是主鏈（例如以太坊），Layer 2 是架在主鏈之上的「擴充方案」，目的是**解決主鏈太慢、太貴的問題**。兩者角色不同，但彼此互補。

### 一、先定義 Layer 1（L1）

- Layer 1 = 區塊鏈主網本身，例如：
  - Bitcoin
  - Ethereum
  - Solana

- 負責：
  - **資料安全**
  - **共識驗證**
  - **交易最終確認**

---

### 二、什麼是 Layer 2（L2）

- Layer 2 是**建在 Layer 1 上的第二層網路**
- 用來**減少主鏈負擔、提升交易速度、降低手續費**
- 把大量計算/交易放到 L2 做，再把結果回寫 L1

---

### 三、Layer 1 和 Layer 2 差別總整理

| 比項     | Layer 1（主鏈）  | Layer 2（擴充）            |
| -------- | ---------------- | -------------------------- |
| 定義     | 基礎區塊鏈       | 蓋在主鏈上的處理層         |
| 範例     | Ethereum、Solana | Arbitrum、Optimism、zkSync |
| 功能     | 提供安全、共識   | 加速交易、降低 Gas 費      |
| 費用     | 高（擁擠時更貴） | 低（執行效率高）           |
| 去中心化 | 高               | 依實作而異                 |

---

### 四、為什麼需要 Layer 2？

以太坊的痛點是：

- 一秒只能處理約 15 筆交易（TPS）
- Gas 費高，有時一筆交易超過 \$20 美元

→ 所以出現 Layer 2 來**分攤流量、降低成本**

---

### 五、常見 Layer 2 範例

| 名稱     | 技術類型          | 特點說明                  |
| -------- | ----------------- | ------------------------- |
| Arbitrum | Optimistic Rollup | 相容 EVM，Gas 費低        |
| Optimism | Optimistic Rollup | 開發者體驗佳              |
| zkSync   | ZK Rollup         | 安全性高、驗證快速        |
| Base     | Optimism 上構建   | Coinbase 推出，穩定發展中 |

## POS POW 差別

### POW（工作量證明）＝拚算力

- 誰的電腦算力強，誰就越容易搶到記帳權
- 每次記帳都要「解題」，超耗電
- 比特幣就是用這種方式
- ✅ **優點：安全性高**（要作弊要花超多算力）
- ❌ **缺點：慢、貴、耗能**

---

### POS（權益證明）＝拚持幣量

- 把幣質押（鎖住），系統**隨機挑選**持幣多的人記帳
- 不用挖礦，省電又快
- 以太坊現在就是用 POS
- ✅ **優點：效率高、省能源**
- ❌ **缺點：幣多的容易掌控權力**

### 一句話記住：

> **POW 拚礦機、POS 拚持幣，都是為了讓大家信任帳本是正確的。**

---

## 區塊鏈跟哈希之間有什麼關係嗎？哈希又是什麼？

**結論：** 區塊鏈依賴「哈希（Hash）」來確保資料不可竄改，是區塊鏈最核心的技術之一。

### 一、哈希是什麼？

1. **哈希函數（Hash Function）** 是 web3 密碼學基礎，用來把任意長度的資料（像一篇文章、交易記錄）轉換成**固定長度的亂碼字串**（稱為「哈希值」或「雜湊值」）。

2. **特性：**
   - **輸入一樣 → 哈希值一定一樣**
   - **輸入哪怕只改一點點 → 哈希值會完全不同**
   - **無法從哈希值推回原始資料**（不可逆）
   - **不會有兩筆不同資料產生同一個哈希值**（理論上）

### 二、哈希在區塊鏈的應用

1. **區塊鏈 = 一串區塊組成的資料鏈**
   - 每個區塊會記錄多筆交易資料。
   - 每個區塊的「區塊頭（Block Header）」會包含「前一個區塊的哈希值」。
   - 這樣就把所有區塊**串成一條鏈**，一塊改，後面全部都會不一致 → 可防篡改。

2. **驗證資料完整性**
   - 只要重新計算哈希值就能確認資料有沒有被動過。

3. **Proof of Work（工作量證明）**
   - 挖礦就是不斷計算哈希，直到找到符合條件的哈希值（例：前幾位是 0000）。

### 三、簡化比喻

- 把哈希想像成「資料的指紋」。
- 區塊鏈就像一本日記，每頁都有前一頁的指紋，如果中途有人偷偷改了一頁，指紋就對不上，馬上會被發現。

### 四、一句話總結

**哈希是區塊鏈的安全基礎，用來串接每個區塊、保證資料完整、不可竄改。**

---

![image](https://hackmd.io/_uploads/H1ecXaWwgx.png)

## 非對稱加密

公鑰加密的數據只能用對應的私鑰解密，反之亦然

**鎖與鑰匙比喻：**

1. **公鑰 = 公開的鎖**
   - 任何人都可以用這把鎖把訊息鎖起來（加密）。
   - 但鎖上後，只有對應的鑰匙能打開。

2. **私鑰 = 唯一的鑰匙**
   - 只有你擁有這把鑰匙，才能打開鎖（解密）。
   - 即使別人拿到鎖（公鑰），也無法打開。

3. **應用場景：**
   - **加密訊息：** 我用你的「鎖」（公鑰）鎖住訊息，只有你用「鑰匙」（私鑰）能打開。
   - **數位簽名：** 我用「鑰匙」（私鑰）鎖上簽名，任何人都能用「鎖」（公鑰）驗證這簽名是我做的。

## 橢圓曲線

可以把橢圓曲線想成一個巨大的迷宮：
公鑰是『終點的位置』，大家都能看到終點在哪。
私鑰就像是『起點到終點的那條秘密路徑』，只有我知道怎麼走。
從私鑰（路徑）走到公鑰（終點）很容易，但要從終點反推整條路徑幾乎不可能，這就是橢圓曲線數學的單向性。
簽名交易就像我給別人看「我真的知道迷宮的路怎麼走」，但我不需要把整條路告訴他們。

## P2P 網路

P2P（Peer-to-Peer）網路是一種 沒有中央伺服器 的網路架構，所有節點（peer）同時充當 客戶端與伺服器，直接互相傳遞資料。

面試解釋：P2P 就像大家都同時是『伺服器和用戶』，互相直接傳資料，不需要靠中央伺服器。像區塊鏈節點就是 P2P 架構，每個節點都能獨立驗證和傳播資訊，讓整個網路更去中心化和安全。

## 默克爾樹（Merkle Tree）

是一種 哈希樹結構，用於快速驗證大量資料是否被竄改。它把資料分塊後計算哈希，逐層向上組合成一個 根哈希（Merkle Root），只要檢查根哈希，就能驗證整批資料的完整性。

![image](https://hackmd.io/_uploads/B1rCwabweg.png)

面試解釋：默克爾樹是一種用哈希值搭建的樹結構，把資料分塊後一層層哈希，最後得到一個根哈希。只要這個根哈希不變，就能保證整批資料沒被改。比特幣用它來快速驗證區塊內的交易。

## 零知識證明

零知識證明（Zero-Knowledge Proof, ZKP）是一種密碼學技術，能讓 「證明的人」在不透露任何額外資訊的情況下，向「驗證的人」證明某件事是真的。
例如：你可以證明「我知道保險箱密碼」，但不需要把密碼告訴對方。
